<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KrishiSakhi — Dashboard (Prototype)</title>

  <!-- FullCalendar CSS -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
  <!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    /* Reset + base */
    *{box-sizing:border-box;margin:0;padding:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    :root{
      --bg:#344435 ;        /* light background */
      --card:#729773;      /* clean cards */
      --accent:#064e3b;    /* dark green */
      --muted:#334d42;     /* muted green-grey */
      --secondary:#ff6b35; /* bright orange */
      --secondary-alt:#f7931e; /* orange variant */
      --shadow:0 6px 18px rgba(16,24,40,0.08);
    }
    body{background:var(--bg);padding:28px;}

    /* App window */
    .app{
      max-width:1100px;margin:0 auto;background:var(--card);border-radius:16px;box-shadow:var(--shadow);overflow:hidden;padding:18px;min-height:720px;display:grid;grid-template-rows:auto 1fr auto;gap:14px;
    }

    /* Top bar */
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:6px 8px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:56px;height:56px;border-radius:12px;
      background:linear-gradient(135deg,#0a7c47,#064e3b);
      display:flex;align-items:center;justify-content:center;
      color:white;font-weight:700;font-size:18px;
      box-shadow:0 6px 18px rgba(0,0,0,0.2)
    }
    .brand h1{font-size:20px;letter-spacing:1px;color:var(--accent)}
    .profile{display:flex;align-items:center;gap:10px}
    .profile .avatar{
      width:44px;height:44px;border-radius:50%;
      background:linear-gradient(180deg,var(--secondary),var(--secondary-alt));
      display:flex;align-items:center;justify-content:center;
      color:white;font-weight:700
    }

    /* Layout: left content and right alerts column */
    .main-row{
      display:grid;
      grid-template-columns:1fr 360px; /* left + right */
      gap:16px;
    }

    /* Left column (stacked) */
    .left{display:grid;grid-template-rows:auto auto 1fr;gap:14px}

    /* Projects row */
    .projects{display:flex;gap:12px}
    .project-card{flex:1;background:linear-gradient(180deg,#ffffff,#E0EFE0 );border-radius:12px;padding:18px;box-shadow:var(--shadow);min-height:110px;display:flex;flex-direction:column;justify-content:center;transition:transform 0.3s, box-shadow 0.3s;}
    .project-card:hover{transform:translateY(-6px);box-shadow:0 12px 25px rgba(0,0,0,0.15);}
    .project-card h3{font-size:16px;margin-bottom:6px;color:var(--accent)}
    .project-card p{color:var(--muted);font-size:13px}

    /* Calendar + weather row */
    .calendar-row{display:grid;grid-template-columns:1fr 220px;gap:12px;align-items:start}

    /* Calendar card */
    .calendar{
      background:linear-gradient(180deg,#fff,#fdfdfb);border-radius:12px;padding:12px;box-shadow:var(--shadow);position:relative;min-height:320px;overflow:hidden
    }

    /* Weather card */
    .weather{background:linear-gradient(180deg,#ffffff,#fefcf9);border-radius:12px;padding:16px;box-shadow:var(--shadow);min-height:160px;min-width: 230px;}
    .weather h4{font-size:15px;color:var(--accent)}
    .weather .temp{font-size:34px;font-weight:700;color:var(--secondary)}
    .weather .meta{color:var(--muted);font-size:13px}

    /* Right alerts column */
    .alerts{background:linear-gradient(180deg,#fff,#fefdf9);border-radius:12px;padding:14px;display:flex;flex-direction:column;height:auto;}
    .alerts h3{margin-bottom:6px;color:var(--accent)}
    .alert-item{padding:10px;border-radius:10px;margin-bottom:10px;background:linear-gradient(180deg,#fff,#fdfcf9);border-left:4px solid var(--secondary)}
    .alert-item.small{font-size:13px;color:var(--muted)}

    /* Chatbot input area */
    .chat-row{display:flex;align-items:center;gap:12px;padding:10px 6px}
    .chat-input{flex:1;background:linear-gradient(180deg,#ffffff,#fefdf9);border-radius:999px;padding:12px 16px;display:flex;align-items:center;gap:12px;box-shadow:var(--shadow);border:1px solid rgba(0,0,0,0.08)}
    .chat-input input{border:0;outline:0;background:transparent;font-size:15px;width:100%}
    .chat-icon{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,#0a7c47,#064e3b);;display:flex;align-items:center;justify-content:center;color:white;font-weight:700}

    /* Footer small note */
    .small-note{text-align:center;color:var(--muted);font-size:13px;padding:6px}

    /* Responsive */
    @media (max-width:980px){
      .main-row{grid-template-columns:1fr 360px;} /* Keep two columns even on smaller screens */
      .calendar-row{grid-template-columns:1fr 220px;}
      .profile .avatar{width:40px;height:40px}
    }

    /* Modal styles */
    #eventModal {
      display:none; position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.5); align-items:center; justify-content:center;
       z-index: 9999;
    }
    #eventModal .modal-content {
      background:white; padding:20px; border-radius:12px; width:300px;z-index: 10000;
    }
    #eventModal h3 {margin-bottom:10px;color:var(--accent);}
    #eventModal select, #eventModal input {
      width:100%; padding:8px; margin-bottom:10px;
    }
    #eventModal .actions {
      display:flex; justify-content:flex-end; gap:10px;
    }
    #eventModal button {
      padding:6px 12px; border:none; border-radius:6px; cursor:pointer;
    }
    #saveBtn {background:var(--secondary); color:white;}
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="brand">
       <div class="logo">
          <img src="KS logo final.png" alt="Krishi Sakhi Logo" style="height:50px; width:auto; vertical-align: middle; border-radius: 8px; ">
        </div> 
        <div>
          <h1>KRISHISAKHI</h1>
          <div style="font-size:12px;color:var(--muted)">Farm Aid • Community Dashboard</div>
        </div>
      </div>

      <div class="profile">
          <div style="text-align:right;font-size:13px;color:var(--muted)" id="userName">
          Hello, Farmer
          </div>
          <div class="avatar" id="userAvatar">A</div>
      </div>
    </div>

    <div class="main-row">
      <div class="left">
        <!-- Projects -->
        <div class="projects">
        <a href="form.html" style="text-decoration:none;flex:1;">
          <div class="project-card">
            <h3>New Project</h3>
            <p>Create a new assistance request or start a new farm project — click to begin.</p>
          </div>
        </a>
          <div class="project-card" id="oldProjectsCard" style="cursor:pointer;">
  <h3>Old Projects</h3>
  <p>View past projects, donations, and progress reports in one place.</p>
</div>


        </div>

        <!-- Old Projects Modal -->
<div id="projectsModal" style="
  display:none;
  position:fixed;
  top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.6);
  align-items:center; justify-content:center;
  z-index:10000;
">
  <div style="
    background:white;
    padding:20px;
    border-radius:12px;
    width:350px;
    max-height:70vh;
    overflow-y:auto;
  ">
    <h3 style="margin-bottom:12px; color:#064e3b;">Select an Old Project</h3>
    <div id="projectsList"></div>
    <div style="margin-top:12px; text-align:right;">
     
    </div>
  </div>
</div>


        <!-- Calendar + Weather row -->
        <div class="calendar-row">
          <div class="calendar">
            <div id="calendar"></div>
          </div>
          <div class="weather">
            <h4>Weather Forecast</h4>
            <div id="weatherBox" style="display:flex;align-items:center;gap:12px;margin-top:10px">
              <div style="flex:0 0 80px;text-align:center">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" 
                     xmlns="http://www.w3.org/2000/svg">
                  <path d="M6 14a4 4 0 110-8 4 4 0 010 8z" 
                        stroke="#ff6b35" stroke-width="1.2" 
                        stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div>
                <div id="temp" class="temp">--°C</div>
                <div id="meta" class="meta">Loading...</div>
              </div>
            </div>
            <div id="lastUpdated" style="margin-top:12px;font-size:13px;color:var(--muted)">
              Last updated: --
            </div>
            <button type="button" id="geoBtn" style="margin:10px 0;padding:8px 12px;border:none;border-radius:6px;background:linear-gradient(135deg,var(--secondary),var(--secondary-alt));color:white;font-weight:600;cursor:pointer;">Use My Current Location</button>
            <div id="geoStatus" style="margin-top: 10px; color: green;"></div>

            <!-- Hidden inputs to store latitude and longitude -->
            <input type="hidden" id="latitude" name="latitude">
            <input type="hidden" id="longitude" name="longitude">
          </div>
        </div>

        
    <!-- Commodity Price Section -->
<div class="projects" style="margin-top:20px;">
  <div class="project-card" style="padding:24px;">
    <h3>Commodity Price Check</h3>
    <p>Check the latest market prices for your crops in your region.</p>

    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-top:12px;">
      <input type="text" id="commodity" placeholder="Commodity (e.g., ONION)" style="padding:10px 12px;border-radius:8px;border:1px solid #ddd;outline:none;font-size:14px;">
      <input type="text" id="state" placeholder="State (e.g., KARNATAKA)" style="padding:10px 12px;border-radius:8px;border:1px solid #ddd;outline:none;font-size:14px;">
      <input type="text" id="district" placeholder="City/District (e.g., HUBLI)" style="padding:10px 12px;border-radius:8px;border:1px solid #ddd;outline:none;font-size:14px;">
    </div>

    <button onclick="fetchPrice()" style="margin-top:12px;padding:10px 16px;border:none;border-radius:8px;background:linear-gradient(135deg,var(--secondary),var(--secondary-alt));color:white;font-weight:600;cursor:pointer;font-size:14px;">Get Price</button>

    <p class="error" id="error" style="color:red;margin-top:10px;font-size:13px;"></p>

    <canvas id="priceChart" width="600" height="300" style="margin-top:16px;border-radius:12px;"></canvas>
  </div>
</div>


      </div>

<!-- Right: Alerts & Notifications -->
<div class="alerts">
  <h3>Alerts & Notifications</h3>
  
</div>



  </div>
   <!-- chatbot area -->
<div style="display:flex;justify-content:center;">
  <a href="chatbot.html">
    <div class="chat-input" style="max-width:760px; cursor:pointer;">
      <svg width="20" height="20" viewBox="0 0 24 24" style="opacity:0.9">
        <path d="M12 2v4" stroke="#ff6b35" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
        <path d="M6 7v1a4 4 0 004 4h4a4 4 0 004-4V7" stroke="#94a3b8" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
      </svg>
      <input placeholder="How can I help you?" aria-label="chat-input" />
      <div class="chat-icon">🤖</div>
    </div>
  </a>
</div>


  <!-- Event Modal -->
  <div id="eventModal">
    <div class="modal-content">
      <h3>Add Event</h3>
      <label>
        <select id="eventType">
          <option value="sowing">🌱 Sowing</option>
          <option value="harvesting">🌾 Harvesting</option>
          <option value="irrigation">💧 Irrigation</option>
        </select>
      </label>
         <select id="cropSelect">
  <option value="">Select Crop</option>
  <option value="wheat">Wheat</option>
  <option value="rice">Rice</option>
  <option value="corn">Corn</option>
  <option value="barley">Barley</option>
  <option value="oats">Oats</option>
  <option value="soybean">Soybean</option>
  <option value="sunflower">Sunflower</option>
  <option value="sugarcane">Sugarcane</option>
  <option value="cotton">Cotton</option>
  <option value="tomato">Tomato</option>
  <option value="potato">Potato</option>
  <option value="onion">Onion</option>
  <option value="garlic">Garlic</option>
  <option value="chili">Chili</option>
  <option value="cabbage">Cabbage</option>
  <option value="maize">Maize</option>
</select>


      <div class="actions">
        <button id="cancelBtn">Cancel</button>
        <button id="saveBtn">Save</button>
      </div>
    </div>
  </div>

  <!-- FullCalendar JS -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="calendar.js"></script>
  <script src="weather.js"></script>
  <script src="location.js"></script>
  <script src="Market.connect.js"></script>
  <script src="../login.js"></script>
  <script src="loginconnect.js"></script>
    <script src="oldproject.js"></script>




</body>
</html>

